<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Pizza Please</title>
    <style type="text/css">
        .photo {
            width: 25%;
        }
    </style>
</head>
<body>
    <div id="photos">
    </div>
    <div id="loading" style="height: 100px; margin:auto; text-align: center;">
    </div>
<script src="js/instafeed.min.js"></script>
<script>
    var feed = new Instafeed({
        get: 'tagged',
        tagName: 'pizza',
        clientId: '7896038144a843829b9826f88ec7628b',
        target: 'photos',
        resolution: 'standard_resolution',
        template: '<a href="{{link}}" target="_blank"><img class="photo" src="{{image}}" title="{{caption}}"></a>',
        limit: 60
    });
    feed.run();

    var resizeTimeout;
    window.addEventListener('scroll', function() {
        if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight) {
            if(document.getElementById('loading').innerHTML != null) {
                var loadingHtml = '<img src="img/loading.gif">';
                document.getElementById('loading').innerHTML = loadingHtml;
            }

            if (resizeTimeout) {
                clearTimeout(resizeTimeout);
            }

            resizeTimeout = setTimeout(function() {
                if (feed.hasNext()) {
                    feed.next();
                }
                document.getElementById('loading').innerHTML = null;
            }, 300);
        }
    });
</script>
</body>
</html>